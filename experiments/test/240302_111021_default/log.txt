
================ summarize_supporting_surfaces ================
    surface    [sink#1::sink_bottom, braiserbody#1::braiser_bottom]
    supporter    [sink_counter_left, sink_counter_right, wall, counter#1, shelf_lower]
--------------- 
    sink#1::sink_bottom    []
    sink_counter_left    [veggiepotato, bottle#2]
    sink_counter_right    [microwave#1]
    wall    []
    counter#1    [veggiezucchini, bottle#1]
    shelf_lower    [medicine#1]
    braiserbody#1::braiser_bottom    []
================================================================


================ summarize_supported_movables ================
    movable    [veggiezucchini]
--------------- 
    veggiezucchini    counter#1
================================================================
pr2_agent.pddlstream_from_state_goal(
    domain = /home/zhutiany/Documents/kitchen-worlds/pybullet_planning/pddl/pr2_domain_pigi.pddl, 
    stream = /home/zhutiany/Documents/kitchen-worlds/pybullet_planning/pddl/pr2_stream_pigi.pddl, 
    custom_limits = {0: (-0.5, 3), 1: (-2, 10), 17: (0, 3)}
----------------
PART I: world objects | door(1),  | obstacles(31) = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]
----------------
pr2robot      |  PR2Robot: pr2robot    |  Pose: (0.0, 0.0, 0.0, 0.0, -0.0, 0.0)
14      |  Object: minifridge | asset: MiniFridge/11178    |  Pose: (0.561, 1.578, 1.067, 0.0, -0.0, 3.142)
(14, 3)      |  Door: minifridge::joint_1 | asset: MiniFridge/11178    |  Handle: handle_2    |  JointLimit: (-0.0, 3.142)    |  Pose: 0.0
----------------
1      |  Floor: floor1 | asset: box    |  Pose: (1.375, 4.0, -0.002, 0.0, -0.0, 0.0)     (excluded from planning)
2      |  Object: sinkbase | asset: SinkBase/45305    |  Pose: (0.378, 3.891, 0.455, 0.0, -0.0, 3.142)     (excluded from planning)
3      |  Object: sink#1 | asset: Sink/00005    |  Pose: (0.571, 3.891, 1.041, 0.0, -0.0, 3.142)     (excluded from planning)
(3, None, 2)      |  Surface: sink#1::sink_bottom | asset: Sink/00005    |  Pose: (0.571, 3.809, 0.922, 1.572, 0.002, -1.571)     (excluded from planning)
4      |  Object: faucet | asset: Faucet/156    |  Pose: (0.395, 3.891, 1.171, 0.0, -0.0, 3.142)     (excluded from planning)
7      |  Object: sink_counter_front | asset: box    |  Pose: (0.74, 3.891, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
8      |  Object: sink_counter_back | asset: box    |  Pose: (0.228, 3.891, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
9      |  Object: cabinetlower | asset: CabinetLower/35059    |  Pose: (0.377, 4.756, 0.472, 0.0, -0.0, 3.142)     (excluded from planning)
10      |  Object: ovencounter | asset: OvenCounter/101930    |  Pose: (0.387, 5.395, 0.525, 0.0, -0.0, 3.142)     (excluded from planning)
11      |  Object: cabinetlower#1 | asset: CabinetLower/41004    |  Pose: (0.344, 5.911, 0.539, 0.0, -0.0, 3.142)     (excluded from planning)
12      |  Object: dishwasherbox | asset: DishwasherBox/11826    |  Pose: (0.369, 2.967, 0.517, 0.0, -0.0, 3.142)     (excluded from planning)
13      |  Object: cabinettall | asset: CabinetTall/46236    |  Pose: (0.439, 2.318, 0.99, 0.0, -0.0, 3.142)     (excluded from planning)
15      |  Object: minifridgebase | asset: MiniFridgeBase/46166    |  Pose: (0.572, 1.579, 0.189, 0.0, -0.0, 3.142)     (excluded from planning)
16      |  Object: cabinettall#1 | asset: CabinetTall/46197    |  Pose: (0.48, 0.825, 0.993, 0.0, -0.0, 3.142)     (excluded from planning)
17      |  Supporter: wall | asset: box    |  Pose: (-0.075, 3.303, 1.309, 0.0, -0.0, 0.0)     (excluded from planning)
6      |  Supporter: sink_counter_right | asset: box    |  Pose: (0.397, 4.609, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
5      |  Supporter: sink_counter_left | asset: box    |  Pose: (0.397, 3.101, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
18      |  Supporter: counter#1 | asset: box    |  Pose: (0.397, 5.905, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
19      |  Object: counter_back#1 | asset: box    |  Pose: (-0.003, 3.818, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
20      |  Object: counter_back#2 | asset: box    |  Pose: (-0.003, 5.905, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
21      |  Object: cabinettop | asset: CabinetTop/00001    |  Pose: (0.386, 4.89, 1.913, 0.0, -0.0, 3.142)     (excluded from planning)
(21, 2)      |  Door: cabinettop::chewie_door_right_joint | asset: CabinetTop/00001    |  Handle: chewie_door_right_handle    |  JointLimit: (0.0, 1.57)    |  Pose: 0.0     (excluded from planning)
(21, 6)      |  Door: cabinettop::chewie_door_left_joint | asset: CabinetTop/00001    |  Handle: chewie_door_left_handle    |  JointLimit: (-1.57, 0.0)    |  Pose: 0.0     (excluded from planning)
(21, None, 0)      |  Space: cabinettop::storage | asset: CabinetTop/00001    |  Pose: (0.706, 4.89, 2.153, 0.0, 0.0, -0.0)     (excluded from planning)
22      |  Object: cabinettop_filler | asset: box    |  Pose: (0.161, 4.509, 2.233, 0.0, -0.0, 0.0)     (excluded from planning)
23      |  Supporter: shelf_lower | asset: box    |  Pose: (0.375, 3.101, 1.875, 0.0, -0.0, 0.0)     (excluded from planning)
24      |  Object: microwave#1 | asset: Microwave/7128    |  Pose: (0.397, 4.658, 1.218, 0.0, -0.0, 3.142)     (excluded from planning)
25      |  Object: braiserbody#1 | asset: BraiserBody/100693    |  Pose: (0.456, 5.315, 1.093, 0.0, -0.0, 3.142)     (excluded from planning)
(25, None, 1)      |  Surface: braiserbody#1::braiser_bottom | asset: BraiserBody/100693    |  Pose: (0.456, 5.315, 1.093, 1.571, -0.0, 1.571)     (excluded from planning)
26      |  Object: braiserlid | asset: BraiserLid/100693    |  Pose: (0.456, 5.315, 1.093, 0.0, -0.0, -2.356)     (excluded from planning)
(14, 1)      |  Door: minifridge::joint_0 | asset: MiniFridge/11178    |  Handle: handle_1    |  JointLimit: (0.0, 3.142)    |  Pose: 0.0     (excluded from planning)
(14, None, 0)      |  Space: minifridge::storage | asset: MiniFridge/11178    |  Pose: (0.561, 1.578, 1.067, 1.571, -0.0, 1.571)     (excluded from planning)
27      |  Object: veggiezucchini | asset: Food/VeggieZucchini    |  Pose: (0.75, 5.997, 1.089, 0.0, -0.0, 1.414)     (excluded from planning)
28      |  Object: veggiepotato | asset: Food/VeggiePotato    |  Pose: (0.691, 3.223, 1.131, 0.0, -0.0, 1.056)     (excluded from planning)
29      |  Object: bottle#1 | asset: Bottle/3614    |  Pose: (0.611, 5.902, 1.166, 0.0, -0.0, 0.253)     (excluded from planning)
30      |  Object: bottle#2 | asset: Bottle/3822    |  Pose: (0.696, 2.804, 1.245, 0.0, -0.0, 2.347)     (excluded from planning)
31      |  Object: medicine#1 | asset: Medicine/4427    |  Pose: (0.582, 3.101, 1.954, 0.0, -0.0, 0.904)     (excluded from planning)
32      |  Object: medicine#2 | asset: Medicine/4084    |  Pose: (0.439, 4.599, 1.451, 0.0, -0.0, 2.891)     (excluded from planning)
----------------
PART II: world attachments
----------------
{microwave#1: ObjAttachment(sink_counter_right,microwave#1),
 braiserbody#1: ObjAttachment(ovencounter,braiserbody#1),
 braiserlid: ObjAttachment(braiserbody#1,braiserlid),
 veggiezucchini: ObjAttachment(counter#1,veggiezucchini),
 veggiepotato: ObjAttachment(sink_counter_left,veggiepotato),
 bottle#1: ObjAttachment(counter#1,bottle#1),
 bottle#2: ObjAttachment(sink_counter_left,bottle#2),
 medicine#1: ObjAttachment(shelf_lower,medicine#1),
 medicine#2: ObjAttachment(microwave#1,medicine#2)}
----------------
----------------
Facts extracted from observation (23)
  = [2] : ['=', ('pickcost',), 1], ['=', ('placecost',), 1]
  aconf [2] : ['aconf', 'left', aq440=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)], ['aconf', 'right', aq488=(-2.135, 1.296, -3.75, -0.15, -10000.0, -0.1, -10000.0)]
  arm [2] : ['arm', 'left'], ['arm', 'right']
  ataconf [2] : ['ataconf', 'left', aq440=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)], ['ataconf', 'right', aq488=(-2.135, 1.296, -3.75, -0.15, -10000.0, -0.1, -10000.0)]
  atbconf [1] : ['atbconf', q344=(2.0, 4.0, 0.2, 3.142)]
  atposition [1] : ['atposition', '(14, 3)|minifridge::joint_1', pstn0=0.0]
  bconf [1] : ['bconf', q344=(2.0, 4.0, 0.2, 3.142)]
  canmove [1] : ['canmove']
  canpull [1] : ['canpull']
  controllable [1] : ['controllable', 'left']
  defaultaconf [2] : ['defaultaconf', 'left', aq440=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)], ['defaultaconf', 'right', aq488=(-2.135, 1.296, -3.75, -0.15, -10000.0, -0.1, -10000.0)]
  handempty [2] : ['handempty', 'left'], ['handempty', 'right']
  isclosedposition [1] : ['isclosedposition', '(14, 3)|minifridge::joint_1', pstn0=0.0]
  isjointto [1] : ['isjointto', '(14, 3)|minifridge::joint_1', '14|minifridge']
  joint [1] : ['joint', '(14, 3)|minifridge::joint_1']
  position [1] : ['position', '(14, 3)|minifridge::joint_1', pstn0=0.0]
  unattachedjoint [1] : ['unattachedjoint', '(14, 3)|minifridge::joint_1']
----------------

------------ STREAM MAP -------------
    Movable collisions: True
    Motion collisions: True
    Pull collisions: True
    Base collisions: True
    Teleport: False
-------------------------------------
Goal (1): (and
   ('GraspedHandle', (14, 3)),
)

--------------------------------------------------
Robot: pr2robot | Objects: [14, (14, 3)]
Movable: [pr2robot] | Fixed: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32] | Floor: [1]
--------------------------------------------------


--------------------------------------------------

------------------------- PLANNER KWARGS -------------------------
{  'domain_modifier': None,
   'evaluation_time': 30,
   'fc': None,
   'initial_complexity': 5,
   'log_failures': False,
   'max_planner_time': 3,
   'max_plans': 10,
   'max_skeletons': 1,
   'max_solutions': 1,
   'max_time': inf,
   'plan_dataset': [],
   'search_sample_ratio': 0,
   'use_feedback': False,
   'visualize': False,
   'world': World(pr2robot)}
------------------------------------------------------------


focused | | number of evaluations: 23


Iteration: 1 | Complexity: 5 | Skeletons: 0 | Skeleton Queue: 0 | Disabled: 0 | Evaluations: 23 | Eager Calls: 0 | Cost: inf | Search Time: 0.000 | Sample Time: 0.000 | Total Time: 0.000


log | number of evaluations 1: 23

Optimistic streams: Counter({'plan-base-motion': 9, 'sample-handle-grasp': 1, 'get-joint-position-open': 1, 'inverse-kinematics-grasp-handle': 1, 'plan-base-pull-handle': 1, 'inverse-kinematics-ungrasp-handle': 1})
Exhausted optimistic: True




Count Diverse Time: 0.169
Count Diverse Plans: 1




0/1) Stream plan (6, 6, 13.001): 
   1 > sample-handle-grasp:((14, 3))->(#g0)
   2 > get-joint-position-open:((14, 3), pstn0=0.0)->(#p0)
   3 > inverse-kinematics-grasp-handle:(left, (14, 3), pstn0=0.0, #g0)->(#q0, #a0, #t1)
   4 > plan-base-pull-handle:(left, (14, 3), pstn0=0.0, #p0, #g0, #q0, #a0)->(#q1, #b0, #a1, #a2)
   5 > inverse-kinematics-ungrasp-handle:(left, (14, 3), #p0, #g0, #q1, #a1)->(#a3, #t10)
   6 > plan-base-motion:(q344=(2.0, 4.0, 0.2, 3.142), #q0)->(#t11)
Action plan (4, 2.000): 
    _
    grasp_handle ( (14, 3)|minifridge::joint_1, pstn0, #g0, #q0, aq440, #a0, #t1 )
    pull_handle ( (14, 3)|minifridge::joint_1, pstn0, #p0, #g0, #q0, #q1, #b0, #a0, #a1, #a2 )
    ungrasp_handle ( (14, 3)|minifridge::joint_1, #p0, #g0, #q1, #a1, #a3, #t10 )

Plans: 1 | Solutions: 1


----------------------------------------


focused | Solution (1), 0 solutions to go


----------------------------------------


focused | !!! num_solutions >= max_solutions !!!
focused | sequencing time: 0.16899871826171875 | sampling time: 11.732024908065796
Solved: True
Cost: 2.000
Plan:
 1) move_base q344=(2.0, 4.0, 0.2, 3.142) q880=(1.836, 1.202, 0.378, 2.125) c808=t(4, 59)
 2) grasp_handle left (14, 3)|minifridge::joint_1 pstn0=0.0 hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0) q880=(1.836, 1.202, 0.378, 2.125) aq440=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223) aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506) c712=t(7, 157)
 3) pull_handle left (14, 3)|minifridge::joint_1 pstn0=0.0 pstn4=1.969 hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0) q880=(1.836, 1.202, 0.378, 2.125) q672=(1.197, 3.16, 0.378, -2.189) c976=t(4, 30) aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506) aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506) c440=t(7, 30)
 4) ungrasp_handle left (14, 3)|minifridge::joint_1 pstn4=1.969 hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0) q672=(1.197, 3.16, 0.378, -2.189) aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506) aq704=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506) c976=t(7, 157)

----------------
Preimage generated by PDDLStream (31)
  aconf [3] : ['aconf', 'left', aq440=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)], ['aconf', 'left', aq704=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506)], ['aconf', 'left', aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506)]
  ataconf [1] : ['ataconf', 'left', aq440=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)]
  atbconf [1] : ['atbconf', q344=(2.0, 4.0, 0.2, 3.142)]
  atposition [1] : ['atposition', '(14, 3)|minifridge::joint_1', pstn0=0.0]
  atraj [3] : ['atraj', c440=t(7, 30)], ['atraj', c712=t(7, 157)], ['atraj', c976=t(7, 157)]
  basemotion [1] : ['basemotion', q344=(2.0, 4.0, 0.2, 3.142), c808=t(4, 59), q880=(1.836, 1.202, 0.378, 2.125)]
  bconf [3] : ['bconf', q344=(2.0, 4.0, 0.2, 3.142)], ['bconf', q672=(1.197, 3.16, 0.378, -2.189)], ['bconf', q880=(1.836, 1.202, 0.378, 2.125)]
  btraj [2] : ['btraj', c808=t(4, 59)], ['btraj', c976=t(4, 30)]
  canmove [1] : ['canmove']
  controllable [1] : ['controllable', 'left']
  grasphandle [1] : ['grasphandle', 'left', '(14, 3)|minifridge::joint_1', pstn0=0.0, hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), q880=(1.836, 1.202, 0.378, 2.125), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506)]
  handempty [1] : ['handempty', 'left']
  handlegrasp [1] : ['handlegrasp', '(14, 3)|minifridge::joint_1', hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0)]
  isclosedposition [1] : ['isclosedposition', '(14, 3)|minifridge::joint_1', pstn0=0.0]
  isopenedposition [1] : ['isopenedposition', '(14, 3)|minifridge::joint_1', pstn4=1.969]
  issampledposition [1] : ['issampledposition', '(14, 3)|minifridge::joint_1', pstn0=0.0, pstn4=1.969]
  joint [1] : ['joint', '(14, 3)|minifridge::joint_1']
  kingrasphandle [1] : ['kingrasphandle', 'left', '(14, 3)|minifridge::joint_1', pstn0=0.0, hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), q880=(1.836, 1.202, 0.378, 2.125), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), c712=t(7, 157)]
  kinpulldoorhandle [1] : ['kinpulldoorhandle', 'left', '(14, 3)|minifridge::joint_1', pstn0=0.0, pstn4=1.969, hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), q880=(1.836, 1.202, 0.378, 2.125), q672=(1.197, 3.16, 0.378, -2.189), c976=t(4, 30), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), c440=t(7, 30)]
  kinungrasphandle [1] : ['kinungrasphandle', 'left', '(14, 3)|minifridge::joint_1', pstn4=1.969, hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), q672=(1.197, 3.16, 0.378, -2.189), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), aq704=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), c976=t(7, 157)]
  position [2] : ['position', '(14, 3)|minifridge::joint_1', pstn0=0.0], ['position', '(14, 3)|minifridge::joint_1', pstn4=1.969]
  ungraspbconf [1] : ['ungraspbconf', q672=(1.197, 3.16, 0.378, -2.189)]
  ungrasphandle [1] : ['ungrasphandle', 'left', '(14, 3)|minifridge::joint_1', pstn4=1.969, hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), q672=(1.197, 3.16, 0.378, -2.189), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506)]
----------------
0 Action(name='move_base', args=[q344=(2.0, 4.0, 0.2, 3.142), q880=(1.836, 1.202, 0.378, 2.125), c808=t(4, 59)])
1 MoveBaseAction{conf: q704=(2.0, 4.0, 0.2, 3.142)}
1 Action(name='grasp_handle', args=('left', (14, 3), pstn0=0.0, hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), q880=(1.836, 1.202, 0.378, 2.125), aq440=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), c712=t(7, 157)))
2 MoveArmAction{conf: aq744=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)}
2 GripperAction{arm: left, extent: None, position: 0.0867520372045694, teleport: False}
2 AttachObjectAction{arm: left, body: (14, 3), grasp: hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), verbose: True}
2 Action(name='pull_handle', args=('left', (14, 3), pstn0=0.0, pstn4=1.969, hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), q880=(1.836, 1.202, 0.378, 2.125), q672=(1.197, 3.16, 0.378, -2.189), c976=t(4, 30), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), c440=t(7, 30)))
3 MoveBaseAction{conf: q232=(1.884, 1.267, 0.378, 2.191)}
3 Action(name='ungrasp_handle', args=('left', (14, 3), pstn4=1.969, hg80=(-0.333, -0.532, 0.205, -3.142, -0.0, 0.0), q672=(1.197, 3.16, 0.378, -2.189), aq744=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), aq704=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506), c976=t(7, 157)))
4 DetachObjectAction{arm: left, body: (14, 3), supporter: None, verbose: False}
4 GripperAction{arm: left, extent: 1, position: None, teleport: False}
4 MoveArmAction{conf: aq704=(0.274, 0.107, 0.55, -0.181, -2.161, -0.838, -1.506)}


finished executing plan

