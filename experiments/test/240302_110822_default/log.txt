
================ summarize_supporting_surfaces ================
    surface    [sink#1::sink_bottom, braiserbody#1::braiser_bottom]
    supporter    [sink_counter_left, sink_counter_right, minifridge, wall, counter#1, shelf_lower]
--------------- 
    sink#1::sink_bottom    []
    sink_counter_left    [microwave#1, veggiecabbage, veggiecabbage#1, bottle#2]
    sink_counter_right    []
    minifridge    []
    wall    []
    counter#1    [bottle#1]
    shelf_lower    []
    braiserbody#1::braiser_bottom    []
================================================================


================ summarize_supported_movables ================
    movable    [veggiecabbage]
--------------- 
    veggiecabbage    sink_counter_left
================================================================
pr2_agent.pddlstream_from_state_goal(
    domain = /home/zhutiany/Documents/kitchen-worlds/pybullet_planning/pddl/pr2_domain_pigi.pddl, 
    stream = /home/zhutiany/Documents/kitchen-worlds/pybullet_planning/pddl/pr2_stream_pigi.pddl, 
    custom_limits = {0: (-0.5, 3), 1: (-2, 10), 17: (0, 3)}
----------------
PART I: world objects | door(1),  | obstacles(32) = [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33]
----------------
pr2robot      |  PR2Robot: pr2robot    |  Pose: (0.0, 0.0, 0.0, 0.0, -0.0, 0.0)
11      |  Object: minifridge | asset: MiniFridge/11709    |  Pose: (0.642, 4.623, 0.817, 0.0, -0.0, 3.142)
(11, 1)      |  Door: minifridge::joint_0 | asset: MiniFridge/11709    |  Handle: link_0_handle    |  JointLimit: (0.0, 1.571)    |  Pose: 0.0
----------------
1      |  Floor: floor1 | asset: box    |  Pose: (1.28, 4.0, -0.002, 0.0, -0.0, 0.0)     (excluded from planning)
2      |  Object: sinkbase | asset: SinkBase/45463    |  Pose: (0.38, 6.574, 0.505, 0.0, -0.0, 3.142)     (excluded from planning)
3      |  Object: sink#1 | asset: Sink/00004    |  Pose: (0.537, 6.574, 0.949, 0.0, -0.0, 3.142)     (excluded from planning)
(3, None, 1)      |  Surface: sink#1::sink_bottom | asset: Sink/00004    |  Pose: (0.537, 6.573, 0.886, 1.572, 0.002, 1.571)     (excluded from planning)
4      |  Object: faucet | asset: Faucet/104    |  Pose: (0.341, 6.574, 1.202, 0.0, -0.0, 3.142)     (excluded from planning)
6      |  Supporter: sink_counter_right | asset: box    |  Pose: (0.399, 6.954, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
7      |  Object: sink_counter_front | asset: box    |  Pose: (0.73, 6.574, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
8      |  Object: sink_counter_back | asset: box    |  Pose: (0.207, 6.574, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
9      |  Object: cabinettall | asset: CabinetTall/45594    |  Pose: (0.373, 7.505, 0.972, 0.0, -0.0, 3.142)     (excluded from planning)
10      |  Object: cabinetlower | asset: CabinetLower/45213    |  Pose: (0.353, 5.69, 0.545, 0.0, -0.0, 3.142)     (excluded from planning)
12      |  Object: ovencounter | asset: OvenCounter/101773    |  Pose: (0.305, 3.411, 0.515, 0.0, -0.0, 3.142)     (excluded from planning)
13      |  Object: cabinetlower#1 | asset: CabinetLower/45213    |  Pose: (0.353, 2.612, 0.545, 0.0, -0.0, 3.142)     (excluded from planning)
14      |  Object: cabinetlower#2 | asset: CabinetLower/35059    |  Pose: (0.381, 1.998, 0.472, 0.0, -0.0, 3.142)     (excluded from planning)
15      |  Object: dishwasherbox | asset: DishwasherBox/12428    |  Pose: (0.421, 1.308, 0.532, 0.0, -0.0, 3.142)     (excluded from planning)
16      |  Object: cabinetlower#3 | asset: CabinetLower/41004    |  Pose: (0.348, 0.765, 0.539, 0.0, -0.0, 3.142)     (excluded from planning)
17      |  Object: cabinettall#1 | asset: CabinetTall/46236    |  Pose: (0.444, 0.321, 0.99, 0.0, -0.0, 3.142)     (excluded from planning)
18      |  Supporter: wall | asset: box    |  Pose: (-0.17, 3.974, 1.309, 0.0, -0.0, 0.0)     (excluded from planning)
5      |  Supporter: sink_counter_left | asset: box    |  Pose: (0.399, 5.835, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
19      |  Supporter: counter#1 | asset: box    |  Pose: (0.399, 1.72, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
20      |  Object: counter_back#1 | asset: box    |  Pose: (-0.051, 1.72, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
21      |  Object: counter_back#2 | asset: box    |  Pose: (-0.051, 6.215, 1.025, 0.0, -0.0, 0.0)     (excluded from planning)
22      |  Object: cabinettop | asset: CabinetTop/00001    |  Pose: (0.39, 6.108, 1.913, 0.0, -0.0, 3.142)     (excluded from planning)
(22, 2)      |  Door: cabinettop::chewie_door_right_joint | asset: CabinetTop/00001    |  Handle: chewie_door_right_handle    |  JointLimit: (0.0, 1.57)    |  Pose: 0.0     (excluded from planning)
(22, 6)      |  Door: cabinettop::chewie_door_left_joint | asset: CabinetTop/00001    |  Handle: chewie_door_left_handle    |  JointLimit: (-1.57, 0.0)    |  Pose: 0.0     (excluded from planning)
(22, None, 0)      |  Space: cabinettop::storage | asset: CabinetTop/00001    |  Pose: (0.71, 6.108, 2.153, 0.0, 0.0, -0.0)     (excluded from planning)
23      |  Object: cabinettop_filler | asset: box    |  Pose: (0.116, 5.727, 2.233, 0.0, -0.0, 0.0)     (excluded from planning)
24      |  Supporter: shelf_lower | asset: box    |  Pose: (0.33, 1.72, 1.875, 0.0, -0.0, 0.0)     (excluded from planning)
25      |  Object: microwave#1 | asset: Microwave/7167    |  Pose: (0.386, 5.752, 1.239, 0.0, -0.0, 3.142)     (excluded from planning)
26      |  Object: braiserbody#1 | asset: BraiserBody/100045    |  Pose: (0.569, 3.49, 1.212, 0.0, -0.0, 3.142)     (excluded from planning)
(26, None, 1)      |  Surface: braiserbody#1::braiser_bottom | asset: BraiserBody/100045    |  Pose: (0.569, 3.49, 1.212, 1.571, -0.0, 1.571)     (excluded from planning)
27      |  Object: braiserlid | asset: BraiserLid/100045    |  Pose: (0.569, 3.49, 1.212, 0.0, -0.0, -2.356)     (excluded from planning)
(11, 3)      |  Door: minifridge::joint_1 | asset: MiniFridge/11709    |  Handle: link_1_handle    |  JointLimit: (0.0, 1.571)    |  Pose: 0.0     (excluded from planning)
(11, 5)      |  Door: minifridge::joint_2 | asset: MiniFridge/11709    |  Handle: link_2_handle    |  JointLimit: (0.0, 1.571)    |  Pose: 0.0     (excluded from planning)
(11, None, 0)      |  Space: minifridge::storage | asset: MiniFridge/11709    |  Pose: (0.642, 4.623, 0.817, 1.571, -0.0, 1.571)     (excluded from planning)
28      |  Object: veggiecabbage | asset: Food/VeggieCabbage    |  Pose: (0.619, 5.491, 1.109, 0.0, -0.0, 0.031)     (excluded from planning)
29      |  Object: veggiecabbage#1 | asset: Food/VeggieCabbage    |  Pose: (0.678, 5.469, 1.109, 0.0, -0.0, 1.698)     (excluded from planning)
30      |  Object: bottle#1 | asset: Bottle/3616    |  Pose: (0.585, 2.052, 1.145, 0.0, -0.0, 3.056)     (excluded from planning)
31      |  Object: bottle#2 | asset: Bottle/3615    |  Pose: (0.611, 5.481, 1.188, 0.0, -0.0, 2.845)     (excluded from planning)
32      |  Object: medicine#1 | asset: Medicine/4427    |  Pose: (0.539, 5.868, 1.449, 0.0, -0.0, 1.266)     (excluded from planning)
33      |  Object: medicine#2 | asset: Medicine/5861    |  Pose: (0.47, 5.771, 1.454, 0.0, -0.0, 0.457)     (excluded from planning)
----------------
PART II: world attachments
----------------
{microwave#1: ObjAttachment(sink_counter_left,microwave#1),
 braiserbody#1: ObjAttachment(ovencounter,braiserbody#1),
 braiserlid: ObjAttachment(braiserbody#1,braiserlid),
 veggiecabbage: ObjAttachment(sink_counter_left,veggiecabbage),
 veggiecabbage#1: ObjAttachment(sink_counter_left,veggiecabbage#1),
 bottle#1: ObjAttachment(counter#1,bottle#1),
 bottle#2: ObjAttachment(sink_counter_left,bottle#2),
 medicine#1: ObjAttachment(microwave#1,medicine#1),
 medicine#2: ObjAttachment(microwave#1,medicine#2)}
----------------
----------------
Facts extracted from observation (23)
  = [2] : ['=', ('pickcost',), 1], ['=', ('placecost',), 1]
  aconf [2] : ['aconf', 'left', aq88=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)], ['aconf', 'right', aq136=(-2.135, 1.296, -3.75, -0.15, -10000.0, -0.1, -10000.0)]
  arm [2] : ['arm', 'left'], ['arm', 'right']
  ataconf [2] : ['ataconf', 'left', aq88=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)], ['ataconf', 'right', aq136=(-2.135, 1.296, -3.75, -0.15, -10000.0, -0.1, -10000.0)]
  atbconf [1] : ['atbconf', q992=(2.0, 4.0, 0.2, 3.142)]
  atposition [1] : ['atposition', '(11, 1)|minifridge::joint_0', pstn0=0.0]
  bconf [1] : ['bconf', q992=(2.0, 4.0, 0.2, 3.142)]
  canmove [1] : ['canmove']
  canpull [1] : ['canpull']
  controllable [1] : ['controllable', 'left']
  defaultaconf [2] : ['defaultaconf', 'left', aq88=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)], ['defaultaconf', 'right', aq136=(-2.135, 1.296, -3.75, -0.15, -10000.0, -0.1, -10000.0)]
  handempty [2] : ['handempty', 'left'], ['handempty', 'right']
  isclosedposition [1] : ['isclosedposition', '(11, 1)|minifridge::joint_0', pstn0=0.0]
  isjointto [1] : ['isjointto', '(11, 1)|minifridge::joint_0', '11|minifridge']
  joint [1] : ['joint', '(11, 1)|minifridge::joint_0']
  position [1] : ['position', '(11, 1)|minifridge::joint_0', pstn0=0.0]
  unattachedjoint [1] : ['unattachedjoint', '(11, 1)|minifridge::joint_0']
----------------

------------ STREAM MAP -------------
    Movable collisions: True
    Motion collisions: True
    Pull collisions: True
    Base collisions: True
    Teleport: False
-------------------------------------
Goal (1): (and
   ('GraspedHandle', (11, 1)),
)

--------------------------------------------------
Robot: pr2robot | Objects: [11, (11, 1)]
Movable: [pr2robot] | Fixed: [2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33] | Floor: [1]
--------------------------------------------------


--------------------------------------------------

------------------------- PLANNER KWARGS -------------------------
{  'domain_modifier': None,
   'evaluation_time': 30,
   'fc': None,
   'initial_complexity': 5,
   'log_failures': False,
   'max_planner_time': 3,
   'max_plans': 10,
   'max_skeletons': 1,
   'max_solutions': 1,
   'max_time': inf,
   'plan_dataset': [],
   'search_sample_ratio': 0,
   'use_feedback': False,
   'visualize': False,
   'world': World(pr2robot)}
------------------------------------------------------------


focused | | number of evaluations: 23


Iteration: 1 | Complexity: 5 | Skeletons: 0 | Skeleton Queue: 0 | Disabled: 0 | Evaluations: 23 | Eager Calls: 0 | Cost: inf | Search Time: 0.000 | Sample Time: 0.000 | Total Time: 0.000


log | number of evaluations 1: 23

Optimistic streams: Counter({'plan-base-motion': 9, 'sample-handle-grasp': 1, 'get-joint-position-open': 1, 'inverse-kinematics-grasp-handle': 1, 'plan-base-pull-handle': 1, 'inverse-kinematics-ungrasp-handle': 1})
Exhausted optimistic: True




Count Diverse Time: 0.136
Count Diverse Plans: 1




0/1) Stream plan (6, 6, 13.001): 
   1 > sample-handle-grasp:((11, 1))->(#g0)
   2 > get-joint-position-open:((11, 1), pstn0=0.0)->(#p0)
   3 > inverse-kinematics-grasp-handle:(left, (11, 1), pstn0=0.0, #g0)->(#q0, #a0, #t1)
   4 > plan-base-pull-handle:(left, (11, 1), pstn0=0.0, #p0, #g0, #q0, #a0)->(#q1, #b0, #a1, #a2)
   5 > inverse-kinematics-ungrasp-handle:(left, (11, 1), #p0, #g0, #q1, #a1)->(#a3, #t10)
   6 > plan-base-motion:(q992=(2.0, 4.0, 0.2, 3.142), #q0)->(#t11)
Action plan (4, 2.000): 
    _
    grasp_handle ( (11, 1)|minifridge::joint_0, pstn0, #g0, #q0, aq88, #a0, #t1 )
    pull_handle ( (11, 1)|minifridge::joint_0, pstn0, #p0, #g0, #q0, #q1, #b0, #a0, #a1, #a2 )
    ungrasp_handle ( (11, 1)|minifridge::joint_0, #p0, #g0, #q1, #a1, #a3, #t10 )

Plans: 1 | Solutions: 1


----------------------------------------


focused | Solution (1), 0 solutions to go


----------------------------------------


focused | !!! num_solutions >= max_solutions !!!
focused | sequencing time: 0.13600993156433105 | sampling time: 3.518796920776367
Solved: True
Cost: 2.000
Plan:
 1) move_base q992=(2.0, 4.0, 0.2, 3.142) q464=(1.466, 6.03, 0.094, -2.579) c304=t(4, 43)
 2) grasp_handle left (11, 1)|minifridge::joint_0 pstn0=0.0 hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0) q464=(1.466, 6.03, 0.094, -2.579) aq88=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223) aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903) c640=t(7, 99)
 3) pull_handle left (11, 1)|minifridge::joint_0 pstn0=0.0 pstn3=1.164 hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0) q464=(1.466, 6.03, 0.094, -2.579) q992=(2.176, 4.809, 0.094, 2.54) c936=t(4, 30) aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903) aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903) c944=t(7, 30)
 4) ungrasp_handle left (11, 1)|minifridge::joint_0 pstn3=1.164 hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0) q992=(2.176, 4.809, 0.094, 2.54) aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903) aq632=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903) c600=t(7, 99)

----------------
Preimage generated by PDDLStream (31)
  aconf [3] : ['aconf', 'left', aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903)], ['aconf', 'left', aq632=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903)], ['aconf', 'left', aq88=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)]
  ataconf [1] : ['ataconf', 'left', aq88=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)]
  atbconf [1] : ['atbconf', q992=(2.0, 4.0, 0.2, 3.142)]
  atposition [1] : ['atposition', '(11, 1)|minifridge::joint_0', pstn0=0.0]
  atraj [3] : ['atraj', c600=t(7, 99)], ['atraj', c640=t(7, 99)], ['atraj', c944=t(7, 30)]
  basemotion [1] : ['basemotion', q992=(2.0, 4.0, 0.2, 3.142), c304=t(4, 43), q464=(1.466, 6.03, 0.094, -2.579)]
  bconf [3] : ['bconf', q464=(1.466, 6.03, 0.094, -2.579)], ['bconf', q992=(2.0, 4.0, 0.2, 3.142)], ['bconf', q992=(2.176, 4.809, 0.094, 2.54)]
  btraj [2] : ['btraj', c304=t(4, 43)], ['btraj', c936=t(4, 30)]
  canmove [1] : ['canmove']
  controllable [1] : ['controllable', 'left']
  grasphandle [1] : ['grasphandle', 'left', '(11, 1)|minifridge::joint_0', pstn0=0.0, hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), q464=(1.466, 6.03, 0.094, -2.579), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903)]
  handempty [1] : ['handempty', 'left']
  handlegrasp [1] : ['handlegrasp', '(11, 1)|minifridge::joint_0', hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0)]
  isclosedposition [1] : ['isclosedposition', '(11, 1)|minifridge::joint_0', pstn0=0.0]
  isopenedposition [1] : ['isopenedposition', '(11, 1)|minifridge::joint_0', pstn3=1.164]
  issampledposition [1] : ['issampledposition', '(11, 1)|minifridge::joint_0', pstn0=0.0, pstn3=1.164]
  joint [1] : ['joint', '(11, 1)|minifridge::joint_0']
  kingrasphandle [1] : ['kingrasphandle', 'left', '(11, 1)|minifridge::joint_0', pstn0=0.0, hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), q464=(1.466, 6.03, 0.094, -2.579), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), c640=t(7, 99)]
  kinpulldoorhandle [1] : ['kinpulldoorhandle', 'left', '(11, 1)|minifridge::joint_0', pstn0=0.0, pstn3=1.164, hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), q464=(1.466, 6.03, 0.094, -2.579), q992=(2.176, 4.809, 0.094, 2.54), c936=t(4, 30), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), c944=t(7, 30)]
  kinungrasphandle [1] : ['kinungrasphandle', 'left', '(11, 1)|minifridge::joint_0', pstn3=1.164, hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), q992=(2.176, 4.809, 0.094, 2.54), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), aq632=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), c600=t(7, 99)]
  position [2] : ['position', '(11, 1)|minifridge::joint_0', pstn0=0.0], ['position', '(11, 1)|minifridge::joint_0', pstn3=1.164]
  ungraspbconf [1] : ['ungraspbconf', q992=(2.176, 4.809, 0.094, 2.54)]
  ungrasphandle [1] : ['ungrasphandle', 'left', '(11, 1)|minifridge::joint_0', pstn3=1.164, hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), q992=(2.176, 4.809, 0.094, 2.54), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903)]
----------------
0 Action(name='move_base', args=[q992=(2.0, 4.0, 0.2, 3.142), q464=(1.466, 6.03, 0.094, -2.579), c304=t(4, 43)])
1 MoveBaseAction{conf: q848=(2.0, 4.0, 0.2, 3.142)}
1 Action(name='grasp_handle', args=('left', (11, 1), pstn0=0.0, hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), q464=(1.466, 6.03, 0.094, -2.579), aq88=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), c640=t(7, 99)))
2 MoveArmAction{conf: aq72=(0.677, -0.343, 1.2, -1.467, 1.242, -1.954, 2.223)}
2 GripperAction{arm: left, extent: None, position: 0.049729281857033486, teleport: False}
2 AttachObjectAction{arm: left, body: (11, 1), grasp: hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), verbose: True}
2 Action(name='pull_handle', args=('left', (11, 1), pstn0=0.0, pstn3=1.164, hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), q464=(1.466, 6.03, 0.094, -2.579), q992=(2.176, 4.809, 0.094, 2.54), c936=t(4, 30), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), c944=t(7, 30)))
3 MoveBaseAction{conf: q272=(1.51, 6.007, 0.094, -2.618)}
3 Action(name='ungrasp_handle', args=('left', (11, 1), pstn3=1.164, hg472=(0.403, 0.723, 0.183, -3.142, -0.0, 0.0), q992=(2.176, 4.809, 0.094, 2.54), aq376=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), aq632=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903), c600=t(7, 99)))
4 DetachObjectAction{arm: left, body: (11, 1), supporter: None, verbose: False}
4 GripperAction{arm: left, extent: 1, position: None, teleport: False}
4 MoveArmAction{conf: aq632=(0.572, -0.01, 1.887, -0.624, -0.55, -0.56, 1.903)}


finished executing plan

